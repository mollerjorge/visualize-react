---
phase: 02-click-event-tracking
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/components/Header.jsx
  - app/components/Hero.jsx
  - app/components/Pricing.jsx
autonomous: true

must_haves:
  truths:
    - "Header navigation clicks tracked with location metadata"
    - "Hero CTA click tracked with button context"
    - "Pricing tier clicks tracked with tier/price metadata"
    - "Mobile navigation clicks tracked separately"
    - "Events visible in OpenPanel dashboard"
  artifacts:
    - path: "app/components/Header.jsx"
      provides: "Navigation and CTA click tracking"
      contains: "window.op('track', 'nav_link_clicked'"
    - path: "app/components/Hero.jsx"
      provides: "Hero CTA click tracking"
      contains: "window.op('track', 'cta_clicked'"
    - path: "app/components/Pricing.jsx"
      provides: "Pricing tier click tracking"
      contains: "window.op('track', 'pricing_cta_clicked'"
  key_links:
    - from: "app/components/Header.jsx"
      to: "window.op"
      via: "defensive check in onClick"
      pattern: "typeof window !== 'undefined' && window\\.op"
    - from: "app/components/Pricing.jsx"
      to: "pricing tier data"
      via: "dynamic index-based properties"
      pattern: "tierNames\\[index\\]"
---

<objective>
Add OpenPanel click tracking to all CTAs and navigation across the site.

Purpose: Complete Phase 2 requirements (OP-03) - track all user click interactions with contextual metadata for conversion analysis.
Output: 9 click points tracked (4 nav + 1 header CTA + 1 hero CTA + 3 pricing CTAs)
</objective>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-click-event-tracking/02-RESEARCH.md
@.planning/phases/01-sdk-integration/01-01-SUMMARY.md

Key pattern from research:
```javascript
if (typeof window !== 'undefined' && window.op) {
  window.op('track', 'event_name', { properties });
}
```

Event schema:
- nav_link_clicked: { location, link_text, link_destination }
- cta_clicked: { button_text, location, cta_type, link_destination }
- pricing_cta_clicked: { pricing_tier, tier_price, tier_position, button_text, location, discount_percentage }
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Header click tracking</name>
  <files>app/components/Header.jsx</files>
  <action>
Add OpenPanel tracking to all Header clicks (desktop nav, mobile nav, CTA).

Desktop navigation links (4 total: Overview, What's inside, Testimonials, Pricing):
- Add `window.op('track', 'nav_link_clicked', { location: 'header', link_text: 'X', link_destination: '#X' })` inside existing onClick

Mobile navigation links (4 total, same sections):
- Add same tracking with `location: 'mobile_menu'`

Header CTA button (Get it now):
- Add `window.op('track', 'cta_clicked', { button_text: 'Get it now', location: 'header', cta_type: 'primary', link_destination: '#pricing' })`

All tracking calls wrapped in defensive check: `if (typeof window !== 'undefined' && window.op) { ... }`

Preserve existing Vercel Analytics and Mixpanel tracking calls.
  </action>
  <verify>
1. `npm run build` succeeds
2. Grep confirms tracking: `grep -n "window.op.*nav_link_clicked" app/components/Header.jsx`
3. Count 8 nav_link_clicked calls (4 desktop + 4 mobile) and 1 cta_clicked call
  </verify>
  <done>
All 9 Header click points tracked: 4 desktop nav, 4 mobile nav, 1 CTA. Each includes location and link metadata.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add Hero CTA tracking</name>
  <files>app/components/Hero.jsx</files>
  <action>
Add OpenPanel tracking to Hero "Get it now" button.

In existing Button onClick handler:
```javascript
if (typeof window !== 'undefined' && window.op) {
  window.op('track', 'cta_clicked', {
    button_text: 'Get it now',
    location: 'hero',
    cta_type: 'primary',
    link_destination: '#pricing'
  });
}
```

Preserve existing Vercel Analytics and Mixpanel tracking calls.
  </action>
  <verify>
1. `npm run build` succeeds
2. Grep confirms: `grep -n "window.op.*cta_clicked" app/components/Hero.jsx`
  </verify>
  <done>
Hero CTA tracked with button_text, location, cta_type, and link_destination properties.
  </done>
</task>

<task type="auto">
  <name>Task 3: Add Pricing tier click tracking</name>
  <files>app/components/Pricing.jsx</files>
  <action>
Add OpenPanel tracking to all 3 pricing tier buttons with dynamic tier metadata.

In the Pricings.map Button onClick handler, add:
```javascript
if (typeof window !== 'undefined' && window.op) {
  const tierNames = ['infographics', 'video_course', 'bundle'];
  window.op('track', 'pricing_cta_clicked', {
    pricing_tier: tierNames[index],
    tier_price: pricing.price,
    tier_position: index + 1,
    button_text: 'Get it now',
    location: 'pricing',
    discount_percentage: index === 2 ? '30%' : '50%'
  });
}
```

Note: tierNames can be moved outside the onClick for clarity since it's static.

Preserve existing Vercel Analytics and Mixpanel tracking calls.
  </action>
  <verify>
1. `npm run build` succeeds
2. Grep confirms: `grep -n "window.op.*pricing_cta_clicked" app/components/Pricing.jsx`
3. Grep confirms dynamic tier: `grep -n "tierNames\[index\]" app/components/Pricing.jsx`
  </verify>
  <done>
All 3 pricing tier buttons tracked with tier-specific metadata (tier name, price, position, discount).
  </done>
</task>

</tasks>

<verification>
After all tasks:
1. `npm run build` succeeds
2. `npm run dev` starts without errors
3. Grep all tracking calls:
   - `grep -rn "window.op.*track" app/components/` shows 12 total calls (9 nav/CTA + 3 pricing)
4. Manual browser test: Click each button, check OpenPanel dashboard for events
</verification>

<success_criteria>
- Build passes with no TypeScript/linting errors
- 12 click tracking calls added across 3 files
- Events use consistent schema: nav_link_clicked, cta_clicked, pricing_cta_clicked
- All tracking includes contextual metadata (location, destination, tier info)
- Existing Mixpanel + Vercel Analytics tracking preserved
</success_criteria>

<output>
After completion, create `.planning/phases/02-click-event-tracking/02-01-SUMMARY.md`
</output>
